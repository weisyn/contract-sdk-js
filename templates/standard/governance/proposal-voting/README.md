# ææ¡ˆæŠ•ç¥¨æ²»ç†åˆçº¦ç¤ºä¾‹

**åˆ†ç±»**: Governance æ²»ç†ç¤ºä¾‹  
**éš¾åº¦**: â­â­ è¿›é˜¶  
**æœ€åæ›´æ–°**: 2025-01-23

---

## ğŸ“‹ æ¦‚è¿°

æœ¬ç¤ºä¾‹å±•ç¤ºå¦‚ä½•ä½¿ç”¨ WES Contract SDK JS æ„å»ºå»ä¸­å¿ƒåŒ–æ²»ç†ç›¸å…³çš„æ™ºèƒ½åˆçº¦ã€‚é€šè¿‡æœ¬ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨ `helpers/governance` æ¨¡å—æä¾›çš„ä¸šåŠ¡è¯­ä¹‰APIï¼Œç®€åŒ–æ²»ç†åˆçº¦çš„å¼€å‘ã€‚

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

æœ¬ç¤ºä¾‹å®ç°äº†å®Œæ•´çš„æ²»ç†åŠŸèƒ½ï¼š

| åŠŸèƒ½ | å‡½æ•° | è¯´æ˜ |
|------|------|------|
| âœ… **åˆ›å»ºææ¡ˆ** | `Propose` | åˆ›å»ºæ²»ç†ææ¡ˆï¼Œè‡ªåŠ¨å¤„ç†çŠ¶æ€è¾“å‡ºå’Œäº‹ä»¶å‘å‡º |
| âœ… **æŠ•ç¥¨** | `Vote` | å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ï¼Œæ”¯æŒæ”¯æŒ/åå¯¹ä¸¤ç§æ–¹å¼ |
| âœ… **æŠ•ç¥¨å¹¶è®¡æ•°** | `VoteAndCount` | æŠ•ç¥¨å¹¶ç»Ÿè®¡ç»“æœï¼Œè‡ªåŠ¨åˆ¤æ–­ææ¡ˆæ˜¯å¦é€šè¿‡ |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```mermaid
graph TB
    A[åˆçº¦è°ƒç”¨è€…] -->|è°ƒç”¨å‡½æ•°| B[åˆçº¦å‡½æ•°]
    B -->|ä½¿ç”¨| C[helpers/governance]
    C -->|è°ƒç”¨| D[frameworkå±‚]
    D -->|HostABI| E[WESèŠ‚ç‚¹]
    
    C -->|è‡ªåŠ¨å¤„ç†| F[çŠ¶æ€è¾“å‡ºæ„å»º]
    C -->|è‡ªåŠ¨å¤„ç†| G[äº‹ä»¶å‘å‡º]
    
    style C fill:#e1f5ff
    style D fill:#fff4e1
    style E fill:#ffe1f5
```

**æ¶æ„è¯´æ˜**ï¼š
- **åˆçº¦å±‚**ï¼šå¼€å‘è€…ç¼–å†™çš„åˆçº¦å‡½æ•°
- **Helperså±‚**ï¼šä¸šåŠ¡è¯­ä¹‰APIï¼Œè‡ªåŠ¨å¤„ç†çŠ¶æ€è¾“å‡ºæ„å»ºã€äº‹ä»¶å‘å‡º
- **Frameworkå±‚**ï¼šHostABIå°è£…ï¼Œæä¾›åŸºç¡€åŸè¯­
- **èŠ‚ç‚¹å±‚**ï¼šWESèŠ‚ç‚¹ï¼Œæ‰§è¡Œåˆçº¦å¹¶ä¸Šé“¾

---

## ğŸ“š åŠŸèƒ½è¯¦è§£

### 1. Propose - åˆ›å»ºææ¡ˆ

**åŠŸèƒ½è¯´æ˜**ï¼šä½¿ç”¨ `governance.Propose()` åˆ›å»ºæ²»ç†ææ¡ˆã€‚

**å‚æ•°æ ¼å¼**ï¼š
```json
{
  "proposal_id": "proposal_123",
  "proposal_data": "Increase token supply by 10%"
}
```

**SDKè‡ªåŠ¨å¤„ç†**ï¼š
- âœ… çŠ¶æ€è¾“å‡ºæ„å»ºï¼ˆè‡ªåŠ¨æ„å»ºææ¡ˆçŠ¶æ€è¾“å‡ºï¼‰
- âœ… äº‹ä»¶å‘å‡ºï¼ˆè‡ªåŠ¨å‘å‡º Propose äº‹ä»¶ï¼‰

**âš ï¸ æ³¨æ„**ï¼šå®é™…åº”ç”¨ä¸­éœ€è¦ä¸šåŠ¡è§„åˆ™æ£€æŸ¥
- ææ¡ˆåˆ›å»ºæƒé™æ£€æŸ¥ï¼ˆè°å¯ä»¥åˆ›å»ºææ¡ˆï¼‰
- ææ¡ˆæ ¼å¼éªŒè¯ï¼ˆææ¡ˆå†…å®¹æ˜¯å¦ç¬¦åˆè§„èŒƒï¼‰
- ææ¡ˆIDå”¯ä¸€æ€§æ£€æŸ¥

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
wes contract call --address {contract_addr} \
  --function Propose \
  --params '{"proposal_id":"proposal_123","proposal_data":"Increase token supply by 10%"}'
```

---

### 2. Vote - æŠ•ç¥¨

**åŠŸèƒ½è¯´æ˜**ï¼šä½¿ç”¨ `governance.Vote()` å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ã€‚

**å‚æ•°æ ¼å¼**ï¼š
```json
{
  "proposal_id": "proposal_123",
  "support": true
}
```

**SDKè‡ªåŠ¨å¤„ç†**ï¼š
- âœ… çŠ¶æ€è¾“å‡ºæ„å»ºï¼ˆè‡ªåŠ¨æ„å»ºæŠ•ç¥¨çŠ¶æ€è¾“å‡ºï¼‰
- âœ… äº‹ä»¶å‘å‡ºï¼ˆè‡ªåŠ¨å‘å‡º Vote äº‹ä»¶ï¼‰

**âš ï¸ æ³¨æ„**ï¼šå®é™…åº”ç”¨ä¸­éœ€è¦ä¸šåŠ¡è§„åˆ™æ£€æŸ¥
- ææ¡ˆå­˜åœ¨æ€§æ£€æŸ¥ï¼ˆææ¡ˆæ˜¯å¦å·²åˆ›å»ºï¼‰
- æŠ•ç¥¨æƒé™æ£€æŸ¥ï¼ˆè°å¯ä»¥æŠ•ç¥¨ï¼‰
- é‡å¤æŠ•ç¥¨æ£€æŸ¥ï¼ˆæ˜¯å¦å·²ç»æŠ•è¿‡ç¥¨ï¼‰
- æŠ•ç¥¨æ—¶é—´çª—å£æ£€æŸ¥ï¼ˆæ˜¯å¦åœ¨æŠ•ç¥¨æœŸå†…ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
wes contract call --address {contract_addr} \
  --function Vote \
  --params '{"proposal_id":"proposal_123","support":true}'
```

---

### 3. VoteAndCount - æŠ•ç¥¨å¹¶è®¡æ•°

**åŠŸèƒ½è¯´æ˜**ï¼šä½¿ç”¨ `governance.VoteAndCount()` æŠ•ç¥¨å¹¶ç»Ÿè®¡ç»“æœã€‚

**å‚æ•°æ ¼å¼**ï¼š
```json
{
  "proposal_id": "proposal_123",
  "support": true,
  "threshold": 1000
}
```

**ç‰¹ç‚¹**ï¼š
- åœ¨ä¸€æ¬¡æ‰§è¡Œä¸­å®ŒæˆæŠ•ç¥¨å’Œç»Ÿè®¡
- è‡ªåŠ¨åˆ¤æ–­ææ¡ˆæ˜¯å¦é€šè¿‡é˜ˆå€¼

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
wes contract call --address {contract_addr} \
  --function VoteAndCount \
  --params '{"proposal_id":"proposal_123","support":true,"threshold":1000}'
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘åˆçº¦

```bash
cd templates/standard/governance/proposal-voting
asc contract.ts --target release --outFile contract.wasm
```

### 2. éƒ¨ç½²åˆçº¦

```bash
wes contract deploy --wasm contract.wasm --function Initialize
```

### 3. è°ƒç”¨åˆçº¦

```bash
# åˆ›å»ºææ¡ˆ
wes contract call --address {contract_addr} \
  --function Propose \
  --params '{"proposal_id":"proposal_123","proposal_data":"Increase token supply"}'

# æŠ•ç¥¨
wes contract call --address {contract_addr} \
  --function Vote \
  --params '{"proposal_id":"proposal_123","support":true}'

# æŠ•ç¥¨å¹¶è®¡æ•°
wes contract call --address {contract_addr} \
  --function VoteAndCount \
  --params '{"proposal_id":"proposal_123","support":true,"threshold":1000}'
```

---

## ğŸ“Š SDK vs åº”ç”¨å±‚èŒè´£

| èŒè´£ | SDK æä¾› | åº”ç”¨å±‚å®ç° |
|------|---------|-----------|
| **ææ¡ˆåˆ›å»º** | âœ… è‡ªåŠ¨å¤„ç† | - |
| **æŠ•ç¥¨æ“ä½œ** | âœ… è‡ªåŠ¨å¤„ç† | - |
| **ææ¡ˆæƒé™** | âŒ | âœ… éœ€è¦å®ç° |
| **æŠ•ç¥¨æƒé™** | âŒ | âœ… éœ€è¦å®ç° |
| **é‡å¤æŠ•ç¥¨æ£€æŸ¥** | âŒ | âœ… éœ€è¦å®ç° |
| **æŠ•ç¥¨æ—¶é—´çª—å£** | âŒ | âœ… éœ€è¦å®ç° |
| **ææ¡ˆæ‰§è¡Œ** | âŒ | âœ… éœ€è¦å®ç° |

---

## ğŸ’¡ è®¾è®¡ç†å¿µ

### ææ¡ˆç”Ÿå‘½å‘¨æœŸ

```
åˆ›å»ºææ¡ˆ â†’ æŠ•ç¥¨æœŸ â†’ ç»Ÿè®¡ç»“æœ â†’ æ‰§è¡Œææ¡ˆ
   â†“         â†“         â†“          â†“
 Propose    Vote   VoteAndCount  Execute
```

### SDK æä¾›"ç§¯æœ¨"

SDK æä¾›åŸºç¡€èƒ½åŠ›ï¼ˆProposeã€Voteã€VoteAndCountï¼‰ï¼Œå¼€å‘è€…å¯ä»¥ï¼š

- âœ… ç›´æ¥ä½¿ç”¨åŸºç¡€åŠŸèƒ½åˆ›å»ºæ²»ç†åˆçº¦
- âœ… æ·»åŠ ä¸šåŠ¡è§„åˆ™å®ç°å®šåˆ¶éœ€æ±‚
- âœ… ç»„åˆå¤šä¸ªåŠŸèƒ½å®ç°å¤æ‚åœºæ™¯

### åº”ç”¨å±‚æ­å»º"å»ºç­‘"

åº”ç”¨å±‚åœ¨ SDK åŸºç¡€ä¸Šå®ç°ï¼š

- âœ… æƒé™ç®¡ç†ï¼ˆææ¡ˆåˆ›å»ºæƒé™ã€æŠ•ç¥¨æƒé™ï¼‰
- âœ… æ—¶é—´ç®¡ç†ï¼ˆæŠ•ç¥¨æ—¶é—´çª—å£ã€ææ¡ˆæœ‰æ•ˆæœŸï¼‰
- âœ… è§„åˆ™ç®¡ç†ï¼ˆæŠ•ç¥¨æƒé‡ã€é€šè¿‡é˜ˆå€¼ï¼‰
- âœ… ææ¡ˆæ‰§è¡Œï¼ˆè‡ªåŠ¨æ‰§è¡Œé€šè¿‡çš„ææ¡ˆï¼‰

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Governance Helper æ–‡æ¡£](../../../../docs/API_REFERENCE.md#governance) - Governance æ¨¡å—è¯¦ç»†è¯´æ˜
- [Framework æ–‡æ¡£](../../../../_dev/FRAMEWORK_DESIGN.md) - Framework å±‚è¯´æ˜
- [ç¤ºä¾‹æ€»è§ˆ](../README.md) - æ‰€æœ‰ç¤ºä¾‹ç´¢å¼•

---

**æœ€åæ›´æ–°**: 2025-01-23

